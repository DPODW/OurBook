<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ourbook.shop.mapper.MemberMapper">

    <insert id="sellerInsert">
        insert into seller_tb(name,id,pwd,email,role)
        values(#{commonName},#{commonId},#{commonPwd},#{commonEmail},#{commonRole});
    </insert>

    <insert id="buyerInsert">
        insert into buyer_tb(name,id,pwd,email,role)
        values(#{commonName},#{commonId},#{commonPwd},#{commonEmail},#{commonRole});
    </insert>

    <insert id="naverInsert">
        insert into buyer_tb(name,id,pwd,email,role)
        values(#{name},#{id},#{pwd},#{email},#{role});
    </insert>

    <update id="buyerUpdate" parameterType="com.ourbook.shop.dto.CommonMember">
        update buyer_tb
        set name = #{commonName} , pwd = #{commonPwd} , email = #{commonEmail} , role = #{commonRole}
        where id = #{commonId};
    </update>

    <update id="sellerUpdate" parameterType="com.ourbook.shop.dto.CommonMember">
        update seller_tb
        set name = #{commonName} , pwd = #{commonPwd} , email = #{commonEmail} , role = #{commonRole}
        where id = #{commonId};
    </update>

    <delete id="naverDelete" parameterType="String">
        DELETE FROM buyer_tb WHERE email = #{email}
    </delete>

    <delete id="buyerDelete" parameterType="String">
        DELETE FROM buyer_tb WHERE id = #{id}
    </delete>

    <delete id="sellerDelete" parameterType="String">
        DELETE FROM seller_tb WHERE id = #{id}
    </delete>


    <delete id="commonDelete" parameterType="String">
        <choose>
            <when test="role == '[BUYER]'">
                DELETE FROM buyer_tb WHERE id = #{deleteValue}
            </when>
            <otherwise>
                DELETE FROM seller_tb WHERE id = #{deleteValue}
            </otherwise>
        </choose>
    </delete>
</mapper>